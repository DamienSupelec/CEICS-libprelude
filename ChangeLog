2002-01-14  Yoann Vandoorselaere  <yoann@mandrakesoft.com>

	* src/prelude-message.c: lot of cleanup, code comment.

	* src/prelude-io.c (prelude_io_get_fdptr): 
	new function. Return file or ssl pointer associated with
	this file descriptor.

2002-01-11  Yoann Vandoorselaere  <yoann@mandrakesoft.com>

	* src/include/idmef-tree.h: 
	* src/idmef-tree-func.c: 
	* src/idmef-msg-send.c: 
	move list.h inclusion out from the header file.

	* src/prelude-client.c (handle_plaintext_connection): 
	always use PRELUDE_MSG_AUTH for header tag.
	use PRELUDE_MSG_AUTH_PLAINTEXT as a subtag.
	
	(start_unix_connection): read Manager setup, even in UNIX mode.

	(handle_plaintext_connection): call read_plaintext_authentication_result().

	(read_plaintext_authentication_result): new function. 
	Read authentication result.

2002-01-10  Yoann Vandoorselaere  <yoann@mandrakesoft.com>

	* src/prelude-client.c (handle_plaintext_connection): 
	don't leak auth entry.

	* src/include/prelude-message-id.h:
	added ID for authentication.

	* src/include/prelude-message.h: 
	* src/include/prelude-io.h: add a Swig entry so that
	swig know how to generate a wrapper.

	* src/ssl.c (ssl_init_client): 
	free unused data in case of failure.

	* src/prelude-io.c (sys_write): 
	(sys_close): don't handle case where read return 0.
	(file_read): 
	(file_write): theses one should never set errno to EINTR or EAGAIN.

	* src/prelude-client.c (handle_plaintext_connection): 
	read authentication message. This is now done throughr prelude-message,
	not prelude-io directly.

	most of the code reworked cause we use prelude-message everywhere now.

	* src/prelude-auth.c: don't take care of the connecting
	host anymore. Act as a basic interface to the authentication
	file. The message reading / writing code is now in the prelude-client /
	Manager server interface.

	Keep password crypted on the Manager server.

	* src/prelude-io.c (prelude_io_read_delimited): 
	return -1 on EOF.

2002-01-07  Yoann Vandoorselaere  <yoann@mandrakesoft.com>

	* src/config-engine.c (cmp_entry): remove space
	at the beginning of the line.

	* src/idmef-msg-send.c: 
	new interface for sending IDMEF message. This one is to 
	be used by application that are not time critical. Other
	should still directly use the prelude-message API.

	* src/idmef-tree-func.c: moved most of the IDMEF creation
	function from the Manager server to libprelude. 


2002-01-06  Krzysztof Zaraska <kzaraska@student.uci.agh.edu.pl>
	* src/extract.c: added #include <sys/types.h> (FreeBSD compat. fix)

2002-01-05  Yoann Vandoorselaere  <yoann@mandrakesoft.com>

	* src/sensor.c (parse_argument): short option for manager-addr
	is -m, not -a.

	* src/client-ident.c: new file.
	(prelude_client_ident_tell): when called, will tell the
	other peer what ID we are, unless we are a Manager ourselve.

	(declare_ident_to_manager): put the ident in network byte
	order.

	* src/extract.c: new file, contain type checking function
	for message extraction.

	* src/sensor.c (prelude_sensor_init): 
	now take a sensor_name argument.

	(setup_manager_addr): identifier for client manager
	is the sensor name.

	* src/prelude-message.c (prelude_msg_read): 
	it's possible for a message to only contain an header.
	handle that case well, without returning an error.

	* src/prelude-client.c (prelude_client_connect): 
	better error handling. Call prelude_client_ident_tell().

	* src/prelude-client-mgr.c (parse_config_line): 
	warn if Manager emission can not work at initialisation too.

	(setup_backup_fd): include program UID, in the filename. 
	This file can't be shared if two instance of the sensor run
	as different user.

	* src/include/prelude-message-id.h (PRELUDE_MSG_ID_REPLY): 
	(PRELUDE_MSG_ID_REQUEST): new message ID.

	* src/sensor.c (prelude_sensor_init): stop initializing if
	parse_argument() return prelude_option_end or prelude_option_error.

	* src/prelude-getopt.c (check_option_optarg): check index before
	dereferencing argv.

2002-01-04  Yoann Vandoorselaere  <yoann@mandrakesoft.com>

	* src/config-engine.c (is_line_commented): new function.
	(search_entry): if the section the entry is in is commented,
	return an error.
	(config_get_section): ditto.

	* src/include/plugin-common.h (plugin_request_new_id): 
	remove plugin_option API. Plugin have to use prelude-getopt
	API now.

	* src/sensor.c (parse_argument): removed --help option
	hook. The application have to call prelude_option_print_help()
	in order for the user to see library option.
	(parse_argument): do not use prelude_option_new (dead).
	(parse_argument): handle prelude_option_parse_arguments return
	value the right way.

	* src/prelude-getopt.c: include string.h
	(search_cli_option): correctly match short option.
	(check_option_optarg): remove un-necessary code.
	(check_option_noarg): ditto.
	(check_option): initialize optarg to NULL for safety.
	(process_option_cfg_hook): new function: Try to get value for
	option that weren't set on command line in the config file.

	Big cleanup and slight API change.
	

	* src/prelude-client.c (prelude_client_connect): 
	directly call prelude_option_wide_get_msg().

	* src/prelude-client-mgr.c (parse_config_line): 
	remove errornous strtok() function call.

	* src/plugin-common.c: API change. allow asynchronous 
	plugin subscribtion / un-subscribtion. Cleanup.

	* src/config-engine.c (cmp_entry): 
	(cmp_section): make the matching case unsensitive.
	(config_get_section): new function, return 0 if section exist.

2002-01-03  Yoann Vandoorselaere  <yoann@mandrakesoft.com>

	* src/prelude-client-mgr.c (secure_open): 
	avoid symlink attack as much as possible. There is still
	a race condition because we are working with 'possibly 
	persistant file' and there is no way to open a file that 
	already exist securely (without truncating it or deleting it).

2002-01-02  Yoann Vandoorselaere  <yoann@mandrakesoft.com>

	* src/sensor.c (parse_argument): cleanup. Use generic
	sensor configuration file when needed.

	* src/prelude-getopt.c (get_missing_options): 
	cleanup.
	(prelude_option_parse_arguments): only try
	to get missing option from configuration file if filename
	is not NULL.

	* src/prelude-client-mgr.c (parse_config_line): 
	fix case were existing backup wouldn't be flushed.

	* Makefile.am (install-data-hook): create the config directory,
	(755), spool directory (1733, for any sensor to be able to fallback
	to writing to a file).

	Install a default configuration file, to be used the application
	doesn't specify one.

	* src/prelude-getopt.c (prelude_option_parse_arguments): 
	only try to get missing option from configuration file if
	filename is not NULL.

	* src/sensor.c (setup_manager_addr): no need to duplicate
	optarg.

	* src/prelude-auth.c (prelude_auth_create_account): 
	free client address string.
	(prelude_auth_send): ditto.

	* configure.ac: add -O0 -pg to CFLAGS if profiling is enabled.
	
	* src/config-engine.c (load_file_in_memory): handle fopen error
	correctly.

	* src/prelude-client-mgr.c: use two different file descriptor
	referencing the same backup file. One is open for writing, in O_APPEND
	mode. So the file won't get corrupted if different process are writing
	to it at the same time (write are atomic).

	(BACKUP_DIR): now /var/spool/prelude

	This forbid us to use the same file descriptor for reading.

2001-12-30  Yoann Vandoorselaere  <yoann@mandrakesoft.com>

	* src/include/threads.h: workaround for thread enabled thread
	profiling. This code come from http://sam.zoy.org/doc/programming/gprof.html
	The authors is presumably Samuel Hocevar <sam@zoy.org>.

	Only enabled if --enable-profiling is given on command line

	* Added missing CREDITS file, taken from prelude-nids and updated
	with the necessary entry.

2001-12-30  Krzysztof Zaraska <kzaraska@student.uci.agh.edu.pl>
	* src/include/list.h: added #undef LIST_HEAD to fix FreeBSD
	conflict with LIST_HEAD from <sys/queue.h>. See comment
	in the file for details. 
	
	Also added copyright notice. 

	* sensor-adduser/sensor-adduser.c: 
	* src/prelude-getopt.c:
	* src/prelude-message.c:
	added #include <sys/types.h> (FreeBSD fix)

2001-12-29  Yoann Vandoorselaere  <yoann@mandrakesoft.com>

	* src/sensor.c (parse_argument): set warning flags to 0 before 
	internally parsing argument to see if libprelude option were passed.
	Then restore the old warnings flags.

	* src/prelude-getopt.c (option_err): new function only
	print error if the passed flag is set in the global flags.

	* src/sensor.c (parse_argument): When parsing our own 
	(libprelude) option set, don't print warning about unknow option
	which can be option from the sensor that initialise us.

	* src/prelude-getopt.c (prelude_option_set_warnings): 
	new function. Set/Get current warning flags for option parsing.

2001-12-28  Yoann Vandoorselaere  <yoann@mandrakesoft.com>

	* src/plugin-common.c (plugin_print_stats): remove
	\t that was putting garbage in syslog logfile.

	* src/common.c (prelude_log_set_prefix): 
	(standard_log): 
	(syslog_log): 
	new function that allow to set a global prefix to all
	prelude_log() call. Passing NULL to prelude_log_set_prefix()
	remove the prefix.

	* src/daemonize.c (prelude_daemonize): renamed to
	prelude_daemonize(). Comment the function.

	Also, if requested, create an exclusive lockfile held
	until program exit.

	* src/prelude-message.c (read_message_content): 
	comment why we return prelude_msg_error if we get an
	EOF in the middle of a message.
	(prelude_msg_read): free message on error / eof.

	* src/prelude-client.c (handle_plaintext_connection): 
	(handle_ssl_connection): 
	(start_inet_connection): 
	(start_unix_connection): 
	fit API change.

	* src/prelude-client-mgr.c (setup_backup_fd): 

	* src/prelude-io.c (prelude_io_set_file_io): now
	correspond to libc buffered I/O.
	(prelude_io_set_sys_io): renamed from set_network_io().

2001-12-27  Yoann Vandoorselaere  <yoann@mandrakesoft.com>

	* src/include/prelude-message.h: 
	* src/prelude-message.c: 
	new type: prelude_msg_status_t returned by prelude_msg_read.
	This make the handling of the return value easier.

2001-12-26  Yoann Vandoorselaere  <yoann@mandrakesoft.com>

	* src/include/idmef-tree.h: ident members are all uint64_t.
	Add missing IDMEF stuff.

	* src/include/idmef-message-id.h: more work toward full IDMEF
	compliance.

	* src/prelude-auth.c (read_auth_result): Handle case where
	prelude_io_read_delimited() return 0. This fix a possible crash.

2001-12-19  Yoann Vandoorselaere  <yoann@mandrakesoft.com>

	* src/sensor.c (parse_argument): manager address is a wide option.
	(prelude_sensor_get_option_msg): return the wide option message
	for our wide option set.

	* src/prelude-io.c (prelude_io_read_wait): use poll() in order
	to wait data. This also fix a bug where we were returning 0 even
	if we couldn't read the specified amount of bytes.

	* src/prelude-getopt.c (prelude_option_wide_add): 
	(prelude_option_new): compute message len on each wide option add.

	(prelude_option_wide_get_msg): generate, and cache a message
	containing all the wide option.

	* src/prelude-client.c (prelude_client_connect): 
	send wide option message on connect.

	* src/prelude-async.c (async_thread): don't catch signals.

	* configure.ac (CFLAGS): add -DREENTRANT to cflags.

2001-12-14  Yoann Vandoorselaere  <yoann@mandrakesoft.com>

	* src/prelude-ident.c (setup_filedes_if_needed): 
	new function. Correctly setup filed. Will avoid SIGBUS. 

	* src/include/idmef-tree.h: ident is a 64 bit unsigned integer.

	* src/include/prelude-ident.h: 
	* src/prelude-ident.c: new ident API. Use to generate unique 
	64 bits ident, remembered across program run (usage of memory mapped IO).

2001-12-13  Yoann Vandoorselaere  <yoann@mandrakesoft.com>

	* sensor-adduser/Makefile.am: 
	* src/Makefile.am: 
	* configure.ac: 
	Fix : sensor-adduser doesn't compile without OpenSSL.

2001-12-12  Yoann Vandoorselaere  <yoann@mandrakesoft.com>

	* src/prelude-client-mgr.c (prelude_client_mgr_broadcast): 
	(walk_manager_lists): correct warning emmission in case a Manager 
	(or rule of Manager) goes down.

2001-12-11  Yoann Vandoorselaere  <yoann@mandrakesoft.com>

	* src/sensor.c: include ssl.h only if HAVE_SSL is defined.

	* configure.ac (COMMON_LIBS): applied patch from 
	Krzysztof Zaraska <kzaraska@student.uci.agh.edu.pl>
	("use == operator for test in configure, but valid one is =")

2001-12-10  Yoann Vandoorselaere  <yoann@mandrakesoft.com>

	* src/common.c (syslog_log): we have to yse a buffer.
	(standard_log): use vfprintf().

2001-12-08  Yoann Vandoorselaere  <yoann@mandrakesoft.com>

	* src/include/plugin-common-prv.h (plugin_run_with_return_value): 
	(plugin_run): specify the member to call in the macro call.

2001-12-06  Yoann Vandoorselaere  <yoann@mandrakesoft.com>

	* src/prelude-client-mgr.c (prelude_client_mgr_get_manager_list): 
	* src/sensor.c (prelude_sensor_get_manager_list): new function.

	* src/prelude-getopt.c (parse_argument): argv is not const.

2001-12-05  Yoann Vandoorselaere  <yoann@mandrakesoft.com>

	* src/include/common.h (do_init_nofail): put back do_init
	/ do_init_nofail macro.

	* src/prelude-getopt.c : Lot of work. Hierarchy of option
	should now work. Callback have a control over the argument parsing
	using their return value.

	A flag is now passed when adding an option, to tell if it is 
	handled throught the command line interface or the configuration
	file or both.

2001-12-04  Yoann Vandoorselaere  <yoann@mandrakesoft.com>

	* src/prelude-getopt.c (lookup_variable_if_needed): 
	Take the address of the optarg pointer as argument.
	Return 0 on success, -1 on error.

	* src/common.c: 
	* src/include/common.h: Move the log macro code to the prelude_log
	function. The log macro still exist, and will pass the necessary
	parameter to prelude_log().

	This avoid the logging code to be inlined in the calling function, 
	which was bad because it was making the functions grew at the risk of
	not fitting the CPU cache anymore.

2001-11-27  Yoann Vandoorselaere  <yoann@mandrakesoft.com>

	* src/prelude-getopt.c (prelude_option_add): use list_add_tail
	(item were inserted in the wrong order).
	prelude_option_t now contain a list of option (prelude_optlist_t).

	(option_print): new function : print the option hierarchicaly.

	Start changing the interface in order to allow sub-options.

2001-11-26  Yoann Vandoorselaere  <yoann@mandrakesoft.com>

	* src/prelude-getopt.c (handle_option): oops, reverted wrong fix,
	optarg is always returned and is never NULL. Removed un-needed if 
	error prone.

2001-11-26 Banux <banux@mail.ru>
	* src/prelude-getopt.c (handle_option): callback is not call if no arg
	
2001-11-22  Yoann Vandoorselaere  <yoann@mandrakesoft.com>

	* src/include/idmef-tree.h: Pid is a 32 bit integer.

2001-11-21  Yoann Vandoorselaere  <yoann@mandrakesoft.com>

	* src/prelude-message.c (prelude_msg_set): fix assert.

2001-11-19  Yoann Vandoorselaere  <yoann@mandrakesoft.com>

	* src/prelude-async.c (wait_timer_and_data): 
	use a while loop instead of tail recursivity for now as it
	might be the cause of a subtle bug.

	* configure.ac: 
	* src/Makefile.am (libprelude_la_LIBADD): 
	Add autoconf code to search pthread library.

2001-11-16  Yoann Vandoorselaere  <yoann@mandrakesoft.com>

	* src/include/idmef-tree.h: IDMEF structure.
	* src/include/idmef-message-id.h: ID for IDMEF based message.

2001-11-10  Yoann Vandoorselaere  <yoann@mandrakesoft.com>

	* src/prelude-message.c: 
	(read_message_header): 
	(prelude_msg_get): 
	(prelude_msg_write): 
	(prelude_msg_set): 
	use separate index for read / write. This allow us to send a just
	read messages. Forwarding between Manager is on it's way.

	* src/sensor.c (prelude_sensor_send_alert): use
	asynchrnous broadcasting.

	* src/prelude-client-mgr.c (walk_manager_lists): 
	Never free the message ourself. This is up to the caller to do it.
	
	(broadcast_async_cb): 
	(prelude_client_mgr_broadcast_async): When asynchronous operation
	are used, free the message ourself.

2001-11-07  Yoann Vandoorselaere  <yoann@mandrakesoft.com>

	* src/prelude-async.c (get_elapsed_time): new function.
	(wait_timer_and_data): check the average time we spent waiting on
	the condition. (which may be > 1 second if the condition was signaled 
	several time).
	
	(async_thread): Thread safety on list walking.

	* src/sensor.c: include prelude-list.h, not list.h

2001-11-06  Yoann Vandoorselaere  <yoann@mandrakesoft.com>

	* src/prelude-client-mgr.c (prelude_client_mgr_broadcast_msg): 
	make this function void. Set the message to be processed asynchronously.

	* src/sensor.c (prelude_sensor_init): Initialize
	the asynchronous subsystem.

	* src/prelude-message.c: prelude_message_t inherit of 
	prelude_async_object_t capability.

	* src/timer.c: Thread safety.
	* src/prelude-async.c: New asynchronous queue implementation.

2001-11-05  Yoann Vandoorselaere  <yoann@mandrakesoft.com>

	* src/prelude-client-mgr.c (prelude_client_mgr_broadcast_msg): 
	Do not print that failsafe mode is enabled for each message.
	(broadcast_saved_message): print an error if message forwarding fail.

	(flush_backup_if_needed): ftruncate doesn't modify the file offset. 
	Seek to the beginning of the file.

	* src/prelude-client.c (prelude_client_connect): set
	the connection_broken member here. This'll avoid bug
	on reconnection.

	* sensor-adduser/ssl-register.c: include netinet/in.h to fix
	BSD compilation. 
	Thanks to Krzysztof Zaraska <kzaraska@student.uci.agh.edu.pl> for
	reporting this.

	* sensor-adduser/sensor-adduser.c: 
	include config.h

	* src/prelude-client.c
	Address member is not const anymore.
	
	(prelude_client_new): duplicate address string.
	(prelude_client_destroy): free address string.

	* src/prelude-io.c (copy_forward): 
	forward data by chunk of 8192 bytes.

2001-10-30  Yoann Vandoorselaere  <yoann@mandrakesoft.com>

	* src/prelude-io.c: compile properly even if SSL is not available.

	* src/prelude-client-mgr.c (parse_config_string): 
	new function, stop using strtok() which doesn't really fit
	our need. This also fix a bug where another NULL client would be added
	causing AND of client emission to fail.

	* sensor-adduser/sensor-adduser.c (main): 
	Handle case where SSL is not installed.

	* src/prelude-auth.c: 
	Modify to work with a prelude-io object.
	
	* src/prelude-client.c: 
	Fit prelude-auth API change.
	
	* src/Makefile.am (libprelude_la_SOURCES): 
	* src/include/Makefile.am (include_HEADERS):
	remove socket-op.h and socket-op.c, 
	it is obsoleted by the prelude-io API.
	
2001-10-25  Yoann Vandoorselaere  <yoann@mandrakesoft.com>

	* src/sensor.c: remove the prelude_sensor_t private structure.
	We don't need it anymore. Add a global pointer on a Manager list.
	(setup_manager_addr): fit the new clients managers API.

	* src/prelude-client.c: remove reconnection / failsafe (message
	backup) code. This is moved to prelude-client-mgr.c

	(prelude_client_new): Ignore the SIGPIPE signal (we'll check at the
	write return value thought). Support for Manager implicitly closing
	the connection should be improved thought.

	(prelude_client_new): Do not connect here.
	(prelude_client_connect): new function, connect here.
	(prelude_client_get_address): new function, get the address / port
	associated with a prelude_client_t object.
	
	Change Prelude Report to Prelude Manager in several place.

	* sensor-adduser/sensor-adduser.c: we don't need networking
	header here.

	* src/prelude-client-mgr.c: Finish the implementation of the
	clients manager. Have to beautify and comment the code a little
	more thought. Parsing of the configuration line should probably 
	be more robust too.

2001-10-18  Yoann Vandoorselaere  <yoann@mandrakesoft.com>

	* src/prelude-message.c (prelude_msg_read): Changed message
	reading API. This function shoud *never* block, even if a
	message isn't available for reading.

	* src/prelude-io.c (prelude_io_read_wait): new function.
	(prelude_io_read): do not wait for data to arrive.

2001-10-16  Yoann Vandoorselaere  <yoann@mandrakesoft.com>

	* A lot of modification. Complete API change, use
	OOP model in non time critical place for maintainability
	reason.

2001-10-09  Yoann Vandoorselaere  <yoann@mandrakesoft.com>

	* src/include/prelude-io.h: 
	* src/prelude-io.c: 

	New standard / SSL - read / write / close abstraction.
	
	
2001-10-05  Yoann Vandoorselaere  <yoann@mandrakesoft.com>

	* src/auth-common.c (write_account): better error reporting.

2001-10-03  Yoann Vandoorselaere  <yoann@mandrakesoft.com>

	* src/alert-read.c (prelude_alert_read): 
	fd is a pointer on a private structure to be passed to the
	read function cb.

2001-09-28  Yoann Vandoorselaere  <yoann@mandrakesoft.com>

	* src/ssl-config.c: Define KEY_LENGTH and CERT_DAYS moved
	to this file instead of ssl-config.h, they should be used 
	directly by any SSL related sources files.

	Remove the ssl config structure cert_directory member and 
	associated function, it's dependant on the user, and shouldn't 
	be computed here.

	* src/include/alert-read.h: new type readfunc_t,
	to point on a read function to use.
	
	* src/alert-read.c (prelude_alert_read): 
	take a readfunc_t argument identifying the read function to use.
	

2001-09-26  Yoann Vandoorselaere  <yoann@mandrakesoft.com>

	* src/include/ssl-config.h: remove manager related 
	definitions.

2001-09-02  Yoann Vandoorselaere  <yoann@mandrakesoft.com>

	* src/alert-read.c (prelude_alert_read_msg): 
	* src/include/alert-read.h (prelude_alert_read_msg): 
	buf is void.

	* src/include/alert-id.h (ID_PRELUDE_NIDS_ALERT): 
	new file, define known alert ID.

	* src/alert-read.c (prelude_alert_read): 
	better control of the read() return value.
	(prelude_alert_read): Set the message index to 0.

	(prelude_alert_read_msg): return 0 when end of message is reached,
	1 if we got a message, -1 on error. Handle the end of message 
	character.

2001-09-01  Yoann Vandoorselaere  <yoann@mandrakesoft.com>

	* src/alert-read.c: New communication layer.

2001-08-28  Yoann Vandoorselaere  <yoann@mandrakesoft.com>

	* src/include/alert.h: 
	include a sensor_data_len member (16bits).

	* src/alert-common.c (read_alert): read sensor data id
	and sensor data len.

	* src/config-engine.c (cmp_entry): oops, badly synced
	with last prelude stable branch change.

	* src/include/alert.h: include inttypes.h
	alert_t now contain a pointer on the private sensor
	data, and a 8 bits integer representing the kind of
	data it is.

2001-08-26  Yoann Vandoorselaere  <yoann@mandrakesoft.com>

        * src/libprelude/config-engine.c (cmp_entry): 
	Avoid reading past the end of our buffer when the line
	is blank.

	* src/libprelude/plugin-common.c (plugin_config_get): 
	If the argument to pass to the plugin is a variable, try
	to look it up. If it fail issue a warning. Return only if 
	the argument for this option is required.

	* src/libprelude/config-engine.c (config_open): 
	(config_close): 
	(config_set): 
	(get_variable_content): Lookup value for the specified variable. 
	(config_get): Call get_variable_content() if the value 
	found is a variable.

	Made gtk-doc style comment for all theses functions.
	
	* src/libprelude/include/Makefile.am (EXTRA_DIST): 
	add variable.h

	* src/libprelude/Makefile.am (libprelude_la_SOURCES): 
	add variable.c

	* src/libprelude/variable.c: move the variable implementation
	to libprelude. Little code cleanup and function documentation.
	
2001-08-24  Yoann Vandoorselaere  <yoann@mandrakesoft.com>

	* src/alert-common.c (read_alert):
	Return an error if socket_read_nowait() returned 0.
        This prevent a possible report server if the sensor is interupted
        while sending an alert.

2001-08-23  Yoann Vandoorselaere  <yoann@mandrakesoft.com>

	* src/auth-common.c (auth_file_exist_or_create): 
	(auth_read_entry): 
	(auth_create_account): Documented. Put the cpass variable 
	into the #ifdef scope.

	include config.h

2001-08-21  Yoann Vandoorselaere  <yoann@mandrakesoft.com>

	* src/include/compat.h: if package is not defined, 
	dump an error telling to include <libprelude/config.h>

	* Makefile.am (SUBDIRS): process docs subdirectory after
	src.

	* src/include/list.h (list_entry): updated to a more
	recent, documented version, kernel use unsigned long for
	pointer, we do use void *. Use the inline keyword.

	* Move to it's own CVS module.

