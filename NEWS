* 2006-02-06, libprelude-0.9.5:

	- More TLS cleanup.

	- Application can now report error without using specific prelude_client
	  error reporting function.

	- More work and improved verbose error reporting.

	- Fix compilation problem with prelude_error_is_verbose() (#130).

	- Fix OpenBSD compilation problem.


* 2006-01-30, libprelude-0.9.4:

	- Some useful API addition.

	- Much improved, verbose error reporting.

	- Cleaned up TLS handling, various bugfix.

	- In case an error occur when verifying the peer certificate,
	  notify the peer about the failure.


* 2005-01-09, libprelude-0.9.3:

	- Implement analyzer revocation in prelude-adduser. This will require an upcoming 
	  prelude-manager update so that revoked analyzer are denied to connect.

	- Make prelude-adduser use GnuTLS anonymous authentication in case SRP is not 
	  available. This is becoming a requirement since some distribution disable SRP 
	  support because of patent issue. 
	  We keep using SRP by default if both prelude-adduser instance has it.

	- Fix 0.9.2 regression, with a crash when providing prelude-adduser with option.

	- Fix potential OpenBSD compilation issue due to a missing dependencie in the 
	  GnuLib inet_ntop module.


* 2005-01-06, libprelude-0.9.2:

	- Fix FreeBSD and OpenBSD build.

	- Avoid modifying the argv array, move unhandled option at the end (#116).

	- Handle special '--' option code.	

	- Fix license notice, stating clearly that linking from a program
	  using a GPL compatible license is allowed. Required for Debian package 
	  inclusion.

	- Various bugfix.


* 2005-12-13, libprelude-0.9.1:
	
	- Take care of assigning a default CreateTime field if the caller
	  did not already take care of it. 

	- Workaround invalid library run path added through MakeMaker generated Makefile.

        - Fix Perl bindings Makefile generated with DESTDIR appended twice.

	- When compiling against recent GnuTLS version, don't link prelude-adduser to
	  libgnutls-extra since, SRP symbols were moved to libgnutls.

	- If the user is running a modified GnuTLS version with the SRP API removed
	  (namely, this happen on Fedora), warn the user that he should install GnuTLS 
	  from source, and that he might want to open a ticket on RedHat bug tracker 
	  about it.

	- Fix a problem where "MissingFunctionMacros" was reported instead of the function name
	  on error.

	- Set keepalive option for the Prelude client socket.

	- Make option printing buffered.

	- Various bugfix.


* 2005-09-20, libprelude-0.9.0:

	- 0.9.0 final.

	- Make Perl/Python bindings more fault tolerant.


* 2005-09-15, libprelude-0.9.0-rc16:

	- Fix compilation issue on system where __FUNCTION__ is missing
	  (Example: Solaris 9).

	- Perl bindings would fail to compile if perl was compiled using
	  the platform (non gcc) compiler.

	- Fix a lot of bugs with Perl bindings.

	- Fix compilation failure on Solaris 9 (#99)

	- Fix warnings.


* 2005-09-08, libprelude-0.9.0-rc15:

	- Fix OpenBSD compilation issue.

	- Fix crash when using connection pool with no failover.

	- Fix libprelude-error source generation issue under some locale.

	- Make IDMEF AdditionalData helper available from the SWIG bindings.

	- Filter out prelude-config.h exported definition.


* 2005-08-25, libprelude-0.9.0-rc14:

	- Fix Python exception on NULL data.

	- Only use pthread when needed (Example: avoid Perl interpreter failure).


* 2005-08-17, libprelude-0.9.0-rc13:

	- Fix compilation problem on system where ferror/clearerror are 
	  declared as macro.


* 2005-08-17, libprelude-0.9.0-rc12:

	- Workaround for system without variadic macros.

	- 64 bit conversion specifier detection: fix integer truncation issue
	  on system that did not support %llu.

	- Fix compilation issue on system without va_copy().

	- Change connection port number (5554) to IANA reserved Prelude port number (4690).

	- Record full analyzer process path, as per IDMEFv14 recommandation.

	- More IDMEF Criteria operator. Allow case insensitive match.



* 2005-08-01, libprelude-0.9.0-rc11:

	- Better TLS error reporting.

	- SWIG API usage correction for portability.

	- Fix crash on destroy in case no failover was created.

	- Fix memory issue with prelude_string_vprintf() on some platform	
	  with specific va_list handling.

	- prelude-adduser --gid did not lookup the group name GID correctly.



* 2005-07-14, libprelude-0.9.0-rc10:

	- Fix a typo that could lead to 100% application CPU usage
	  on Linux that was introduced in rc9 when using the monotonic clock.

	- Avoid failing if we can not lookup the path of the calling
	  program.

	- Better path resolution for the calling program.

	- Fix compilation failure on system without pthread_atfork
	  introduced in rc9.



* 2005-07-07, libprelude-0.9.0-rc9:

	- Improve prelude-async and prelude-timer thread safety. Use
	  a monotonic clock if available. Fix pthread problem due to
	  broken behavior with fork handler on FreeBSD.

	- Ability for the user to set the LIBPRELUDE_LOGFILE environment
	  variable, defining a place where all prelude log goes.

	- Add the prelude-adduser "chown" command, allowing to change
	  an existing analyzer UID/GID.

	- Make prelude-adduser not reset the profile UID/GID when
	  used on an existing profile (example: you are not required to 
	  specify --uid and --gid anymore for each call to registration-server).	

	- Fix a timer assertion in case we reconnected fine, 
	  but we failed flushing the failover pool. Only flush the
	  global failover when all connection are up.

	- Include missing Prelude.pm in the distributed tarball.

	- Introduce broken down time criteria.	

	- GCC4 warning fixes, 64 bits warnings fix, distcheck fix on 64 
	  bits platform using lib64. More C89 friendlyness.

	- Fix printing of usecond.

	- Various bugfix.


* 2005-05-27, libprelude-0.9.0-rc8:

	- Avoid AI family mixup on prelude-adduser connection registration.

	- Fix some bug in the configuration parser.


* 2005-05-26, libprelude-0.9.0-rc7:

	- Correct IDMEF criteria value escaping. Criteria containing
	  single or double quote should now behave as expected.

	- Make it possible to unset implicitly embedded IDMEF structure.

	- Fix GnuLib FTW module for architecture lacking it.
	
	- Fix some memory leak.

	- Various bugfix.


* 2005-05-18, libprelude-0.9.0-rc6:

	- Fix compilation problem on system lacking the FTS interface.

	- Fix compilation problem on some MacOSX system.

	- Move generation of the Prelude configuration template from sensor
	  first launch to prelude-adduser. More intuitive to the user.

	- You can now use the LIBPRELUDE_DEBUG environment variable to specify
	  a libprelude debug level.

	- Fix problem with prelude-adduser register/registration-server on
	  machine where ipv6 is enabled but no interface actually use it. It
	  happened that prelude-adduser would use an incorrect address family.

	- Make idmef_message_print report GMT offset.

	- Avoid unportable convertion specifier, this was causing issue mainly
	  on Solaris system. 

	- Fix handling of GMT time. Stop messing with environment variable.
	  People who has been experiencing issue with GMT offset or time should
	  try this release.

	- Fix parsing time on Solaris. This resulted in wrong database query
	  from Prewikka.

	- Various bugfix



* 2005-05-01, libprelude-0.9.0-rc5:
	
	- Make permission parser more tolerant.
	
	- Make prelude-adduser dump an error when permission can not be parsed.

	- Allow address formated using [address]:port, this is especially usefull
	  for people on IPv6 network.

	- Make prelude-adduser's registration server provide a --listen option so
	  that the user can specify where to listen for registration.

	- Fix a potential deadlock for sensor using asynchronous heartbeat without
	  asynchronous message.

	- Map value returned by idmef_value_get_object() so that they can be accessed
	  directly by the perl/python binding.
	  
	- Add missing file->file_type IDMEFv14 field.

	- Various bugfix.
	
	
* 2005-04-17, libprelude-0.9.0-rc4:

	- Fix an issue with the prelude-adduser 'add' command not creating all
	  files needed for a Manager. Resulting in later client authentication
	  failure.

	- Don't treat negative GMT offset as an error in Python bindings.

	- Better socklen_t datatype check. Fix compilation on NetBSD system.

	- Use fts in place of ftw for portability (Fix prelude-adduser on MacOSX).

	- Fix possible double free on recursive message read error (fragmented message).

	- Fix GMT offset issue on OpenBSD machine. Include compatibility code for machine
	  that does not support setenv/unsetenv.

	- Fix compilation problem on system where libprelude-0.8 is installed due to the
	  library inclusion path.

	- IDMEF text output beautification.
	

* 2005-04-09, libprelude-0.9.0-rc3:

	- Change to the plugin infrastructure to check the API version
	  a given plugin was compiled with.

	- Make analyzer deletion work on all architecture.

	- Fix bindings Makefile so that they can be used with BSD make.

	- Stop using pcreposix for IDMEF criteria matching, always rely 
          on POSIX regex. The way pcreposix define it's symbol make it impossible 
          to use it from a library if the final program isn't linked against 
          libpcreposix (example: python / perl program using libprelude bindings).

	- Better incorrect IDMEF criteria detection.

	- Fix some compilation warnings.
	
	- Fix OpenBSD/MacOSX/Irix compilation.

	- Fix compilation on system that lack pthread_atfork().

	- Correct IDMEF value operator check.

	- Better IDMEF criteria error return value.


* 2005-03-31, libprelude-0.9.0-rc2:

	- Fix Python/Perl bindings linking order. Was linking to old version of the library
	  on system where old libprelude-0.8 was installed.

	- Fix an issue with the Perl bindings on make clean.
	

* 2005-03-29, libprelude-0.9.0-rc1:

	Note: due to several years of work and the habit of working with the new 
	version, it is hard to remind all the enhancement made in this release.
	Please bear with us and try it for yourself :-)

	- The Prelude framework has been stabilized, and a lot of consistency work 
	  has been going on.  The C API should remain mostly stable at this point, 
	  and we now offer Python and Perl bindings for interacting with Prelude. 
	  
	- C++ applications should now be able to compile with the library. New and 
	  powerful API like idmef-path (defining a path within an IDMEF message tree, 
	  assigning / retrieving it) and IDMEF criteria filtering has been introduced. 

	- IDMEF draft 14 compliance.
	- Support for IDMEF optionnal integer in events.
	- A lot of work happened with the the IDWG to fix known IDMEF issue.
	- Message routing across distributed Manager for remote sensors administration.

	- The failover subsystem, used when the communication with a Prelude-Manager goes down, 
	  now support transaction and quota.
	
	- Message unique identity generation now done on the sensor side, and fully optional 
	  per IDMEF specifications.

	- Support Ipv6 for client/manager connectivity.

	- Use GnuTLS instead of OpenSSL. Authentication is now always done through TLS, and 
	  the encryption later can be dropped if the connection is local.

	- Usage of a single tool for sensor registration using SRP (Secure Remote Passwor protocol).

	- Allow multiple analyzer instance through the use of profiles.

	- Clean error handling. Application can now check the return value using
	  prelude_perror(), prelude_strerror(), and prelude_strsource().

	- It is now possible to remotely query and set sensors options.
	
	- Make the plugin API allow different instance of one plugin to be loaded.

	- Allow recursive configuration file inclusion.

	- You can now define filesystem quota for failover.

	- Changed the way AND of manager work:
	  When using {{ manager_addr = x.x.x.x && y.y.y.y }}, the emission used to stop if emission to x.x.x.x failed. 
	  However, from a practical point of view, people who use AND of manager for redondancy want both manager to 
  	  receive exactly the same messages, even if one of the Manager fail.

	  Thus, in case emission x.x.x.x fail, we still want to emit the message to y.y.y.y, 
	  and save the failed message associating them to x.x.x.x manager, for later emission.

	- Heartbeat now carry a status and an interval.

	- Use GnuLib for enhenced portability.
	

* 2003-12-09, libprelude-0.8.10:

	- Yoann Vandoorselaere <yoann@prelude-ids.org>:
	  use a newer libtool version (fix an OpenBSD) problem.

* 2003-12-05, libprelude-0.8.9:

	- Yoann Vandoorselaere <yoann@prelude-ids.org>:
	  Use version-info to set library soname to something
	  meaningful. 

	- Yoann Vandoorselaere <yoann@prelude-ids.org>:
	  Implement prelude_io_pending() function that return
	  wether there are byte waiting to be read or not. Take
	  care of the OpenSSL internal buffer.

	- Nicolas Delon <delon.nicolas@wanadoo.fr>:
	  Add a new prelude-io type dedicated to socket operation. 
	  Enable checking of connection state with theses. This fix
	  a bug where a connection breakage would only be noticed
	  on the second alert send.

	- Yoann Vandoorselaere <yoann@prelude-ids.org>:
	  Make sensor-adduser work if not called by root.

	- Yoann Vandoorselaere <yoann@prelude-ids.org>:
	  Allow sensor-adduser to be called without the --uid 
          option, but print a big warning telling that sensor added without
          a provided UID will have to be run using the registration UID.

	- Yoann Vandoorselaere <yoann@prelude-ids.org>:
	  Set generated certificate to start being valid one day 
	  before of the current time. This can avoid problem in case 
	  one of the machine involved in the communication doesn't have it's 
	  time set right.

	- Yoann Vandoorselaere <yoann@prelude-ids.org>:
	  Allow a children option to access it's parent option through
	  a new function in the prelude-getopt API.

	- Yoann Vandoorselaere <yoann@prelude-ids.org>:
	  Fix yet another plugin loading problem on OpenBSD.

* 2003-10-21, libprelude-0.8.8:

	- Yoann Vandoorselaere <yoann@prelude-ids.org>:
	  Work around problem with desynchronized ident that 
	  people were getting in case of machine or manager crash.

	- Nicolas Delon <delon.nicolas@wanadoo.fr>:
	  Fix a memory leak affecting prelude-lml.

	- Yoann Vandoorselaere <yoann@prelude-ids.org>:
	  Fix a bug that could result in linking to the wrong 
	  version of libprelude being linked when dual libprelude 
	  version were installed.

	- Stephane Loeuillet <stephane.loeuillet@tiscali.fr>:
	  README update.

* 2003-09-30, libprelude-0.8.7:

	- Yoann Vandoorselaere <yoann@prelude-ids.org>
	  Fix a crash on system without getaddrinfo().

* 2003-09-21, libprelude-0.8.6:

	- Yoann Vandoorselaere <yoann@prelude-ids.org>
	  Re-establish post 0.8.5 behavior of defaulting to enable
	  asynchronous timer.

        - Yoann Vandoorselaere <yoann@prelude-ids.org>
          Handle tool, overflow, and correlation alert.

	- Yoann Vandoorselaere <yoann@prelude-ids.org>
	  Make the operation of gathering/executing a timer atomic. 
	  Merge part of the HEAD code and avoid locking in case
	  asynchronous timer aren't used.

        - Krzysztof Zaraska <kzaraska@student.uci.agh.edu.pl>
	  Add AC_PROG_CPP so the preprocessor is detected before the OpenSSL
	  presence test, so the OpenSSL detection works correctly.

	- Yoann Vandoorselaere <yoann@prelude-ids.org>
	  Use pthread_join() instead of pthread_cancel().
	  The behavior of pthread_cancel too much depend on the architecture.

	- Yoann Vandoorselaere <yoann@prelude-ids.org>
	  Add a --pthread-cflags option to libprelude-config in order to
	  avoid non threaded program to compile with pthread related option
	  which might slow down program execution due to extra locking used
	  by libc.

	- Sylvain Gil <prelude-code@tootella.org>
	  Fix libprelude compilation under MacOSX.

	- Yoann Vandoorselaere <yoann@prelude-ids.org>
	  Forbid multiline comment. (Fix #0000078).

	- Yoann Vandoorselaere <yoann@prelude-ids.org>
	  Fix GCC strict-aliasing warning.

	- Yoann Vandoorselaere <yoann@prelude-ids.org>
	  Provide the ability for a prelude-client to connect using both
	  IPv4 and IPv6. Also, the prelude-client code has been reworked 
	  so that connection using UNIX and TCP socket share more code.

	- Yoann Vandoorselaere <yoann@prelude-ids.org>
	  Implementation of the prelude_inet API providing IPv4/IPv6 lookup
	  function, as well as their fallback if IPv6 support is not present.

* 2003-04-28, libprelude-0.8.5:

	- Yoann Vandoorselaere <yoann@prelude-ids.org>
	  Explicitly permit linking with OpenSSL so that Debian
	  package might be distributed.

	- Yoann Vandoorselaere <yoann@prelude-ids.org>
	  Fix AC_DATATYPE_GENERIC so that it can find valid socklen_t
	  replacement.

	- Yoann Vandoorselaere <yoann@prelude-ids.org>
	  Fix a possible SIGSEGV on client that doesn't use prelude-getopt.

	- Yoann Vandoorselaere <yoann@prelude-ids.org>
	  Fix a priority problem when assigning a variable, that
	  could lead to a SIGSEGV.

	- Yoann Vandoorselaere <yoann@prelude-ids.org>
	  Fix compilation with OpenSSL 0.9.7.

	- Yoann Vandoorselaere <yoann@prelude-ids.org>
	  prelude-getopt doesn't need to modify the argv array
	  anymore. The application might want to still use it.

	- Yoann Vandoorselaere <yoann@prelude-ids.org>
	  Fix a bug where option would not be printed if option 
	  flags was set to zero.

	- Yoann Vandoorselaere <yoann@prelude-ids.org>
	  Fix a possible NULL strcmp that would result in a SIGSEGV 
	  for option without longname.

	- Yoann Vandoorselaere <yoann@prelude-ids.org>
	  Fix a possible NULL pointer dereference in the Prelude 
 	  configuration engine.
	
	- Yoann Vandoorselaere <yoann@prelude-ids.org>
	  When starting as a deamon close stdin, stdout, and stderr.

	- Krzysztof Zaraska <kzaraska@student.uci.agh.edu.pl>
	  Make arbitrary length certificate work correctly, and fix
	  a possible sensor-adduser SIGSEGV. 

* 2002-09-23, libprelude-0.8.4:
	
	- Correct the way we enable/disable OpenSSL support.
	  (Yoann Vandoorselaere).

	- Workaround system that doesn't define socklen_t. This
	  make libprelude compile on Solaris.
	  (Yoann Vandoorselaere).

	- Fix a possible NULL free in case the manager client 
	  creation fail.
	  (Yoann Vandoorselaere).

	- Fix potential signed/unsigned integer problems.
	  (Guillaume Pelat).

* 2002-09-10, libprelude-0.8.3:
	- Make sensor-adduser do exact compareason on sensor name,
	  so that two sensor with the same prefix can't be confused.
	  (Yoann Vandoorselaere).

	- If we're running on a big endian system, don't send uninitialized
	  64bits value.
	  (Yoann Vandoorselaere).

	- Handle error correctly when processing option from the config
	  file. Assorted cleanup.
	  (Yoann Vandoorselaere)

	- Fix possible file descriptor leak when handling error.
	  (Guillaume Pelat).	

* 2002-08-29, libprelude-0.8.2:
	- Correct check for OpenSSL, and profiling, so that
	  you won't end up disabling OpenSSL with 
	  --enable-ssl=yes.				  (Yoann Vandoorselaere).

	- Fix an infinite loop when asking for SSL setup
	  confirmation.                                   (Sebastien Guilbaud).

	- Don't provide an empty string to option callback
	  when there is no argument.                      (Yoann Vandoorselaere).

* 2002-08-26, libprelude-0.8.1:
	- Act as a LIFO when subscribing a plugin, so that
	  a plugin loading another, both subscribing from
	  plugin_init() won't end up with undefined result (Yoann Vandoorselaere).

	- Delete plugin entry on plugin loading error. 
	  Fix a possible SIGSEGV.                          (Yoann Vandoorselaere).

	- Fix possible NULL pointer dereference when 
	  searching for a plugin.			   (Yoann Vandoorselaere).
	
	- Remove some unused function			   (Guillaume Pelat).

	- Fix possible recursive loop when asking 
	  information to the user in sensor-adduser.       (Guillaume Pelat).

	- Free username on error when authenticating.      (Guillaume Pelat).
	
	- Always nul terminate socket filename (handle
	  case where the filename is too long).            (Guillaume Pelat).
